<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Edit - <%= project.name %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
</head>
<body>
  <div class="container py-4">
    <h4>Project &gt; Edit</h4>

    <!-- Nav Tabs -->
    <ul class="nav nav-tabs mb-4" id="tabMenu">
      <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#details">Details</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#team">Team</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#stakeholders">Stakeholders</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#milestones">Milestone</a></li>
      <li class="nav-item"><a class="nav-link disabled">Document</a></li>
      <li class="nav-item"><a class="nav-link disabled">Task</a></li>
    </ul>

    <div class="tab-content">
      <!-- Details -->
      <div class="tab-pane fade show active" id="details">
        <form method="POST" action="/projects/<%= project._id %>?_method=PUT" class="form-section">
          <div class="row g-3">
            <div class="col-md-4">
              <label>ID</label>
              <input type="text" class="form-control" name="projectId" value="<%= project.projectId %>" required />
            </div>
            <div class="col-md-4">
              <label>Name</label>
              <input type="text" class="form-control" name="name" value="<%= project.name %>" required />
            </div>
            <div class="col-md-4">
              <label>Department</label>
              <select class="form-select" name="department">
                <option>HR</option>
                <option>IT</option>
                <option>Marketing</option>
              </select>
            </div>
            <div class="col-md-4">
              <label>Category</label>
              <select class="form-select" name="category">
                <option>Internal</option>
                <option>Client</option>
              </select>
            </div>
            <div class="col-md-4">
              <label>Start Date</label>
              <input type="date" class="form-control" name="startDate" value="<%= project.startDate %>" />
            </div>
            <div class="col-md-4">
              <label>End Date</label>
              <input type="date" class="form-control" name="endDate" value="<%= project.endDate %>" />
            </div>
            <div class="col-12">
              <label>Description</label>
              <textarea class="form-control" name="description"><%= project.description %></textarea>
            </div>
          </div>
          <div class="mt-4 d-flex justify-content-between">
            <a href="/projects" class="btn btn-outline-secondary">Cancel</a>
            <div>
              <button type="submit" class="btn btn-primary">Save</button>
              <form method="POST" action="/projects/<%= project._id %>?_method=DELETE" style="display:inline;">
                <button type="submit" class="btn btn-danger">Delete</button>
              </form>
            </div>
          </div>
        </form>
      </div>

      <!-- Team -->
      <div class="tab-pane fade" id="team">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5>Team Members</h5>
          <a href="/projects/<%= project._id %>/team/addteam" class="btn btn-outline-primary btn-sm">+ Add</a>
        </div>
        <div class="row">
          <% teamMembers.forEach(member => { %>
            <div class="col-md-4 mb-3">
              <div class="card p-3 shadow-sm">
                <h6><%= member.name %></h6>
                <p><%= member.role %></p>
                <p><%= member.email %></p>
                <p><small><%= member.type %></small></p>
              </div>
            </div>
          <% }) %>
        </div>
      </div>

      <!-- Stakeholders -->
      <div class="tab-pane fade" id="stakeholders">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5>Stakeholders</h5>
          <a href="/projects/<%= project._id %>/stakeholders/add" class="btn btn-outline-primary btn-sm">+ Add</a>
        </div>
        <div class="row">
          <% stakeholders.forEach(s => { %>
            <div class="col-md-4 mb-3">
              <div class="card p-3 shadow-sm">
                <h6><%= s.name %></h6>
                <p><%= s.type %></p>
                <p>üìû <%= s.contact %></p>
                <p>‚úâÔ∏è <%= s.email %></p>
              </div>
            </div>
          <% }) %>
        </div>
      </div>

      <!-- Milestones -->
      <div class="tab-pane fade" id="milestones">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5>Milestones</h5>
          <a href="/projects/<%= project._id %>/milestones/add" class="btn btn-outline-primary btn-sm">+ Add</a>
        </div>
        <div class="row">
          <% milestones.forEach(m => { %>
            <div class="col-md-4 mb-3">
              <div class="card p-3 shadow-sm">
                <h6><%= m.title %> (<%= m.state %>)</h6>
                <p><%= m.description %></p>
                <p><small><%= m.startDate %> to <%= m.endDate %></small></p>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

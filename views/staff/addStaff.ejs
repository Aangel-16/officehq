<%- include("../partials/header") %>

<div class="container mb-4">
  <form id="staffForm" action="/staff/add" method="POST" enctype="multipart/form-data">

<!-- Profile Image Upload Section -->
<!-- Image with camera overlay -->
<div class="position-relative me-4" style="width: 100px; height: 100px;">
  <img id="profilePreview"
       src="/images/default.png"
       alt="Profile Photo"
       class="rounded-circle"
       style="width: 100px; height: 100px; object-fit: cover; border: 3px solid #e6f4f7;">

  <!-- File input (hidden) -->
  <input type="file" id="photoUpload" name="photo" accept="image/*" class="d-none">

  <!-- Camera icon label triggers file input -->
  <label for="photoUpload"
         class="position-absolute bottom-0 end-0 bg-white border rounded-circle p-1 shadow-sm"
         style="cursor: pointer; transform: translate(25%, 25%);">
    <i class="bi bi-camera-fill text-primary"></i>
  </label>
</div>
<script>
  const photoInput = document.getElementById('photoUpload');
  const profilePreview = document.getElementById('profilePreview');

  photoInput.addEventListener('change', function () {
    const file = photoInput.files[0];
    if (file) {
      const reader = new FileReader();

      reader.onload = function (e) {
        profilePreview.src = e.target.result;  // Show the selected image
      };

      reader.readAsDataURL(file);
    }
  });
</script>



    <!-- Title + Buttons -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="form-title" style="color: #0C8FAD;">Basic Info</h4>
      <div class="mt-4 text-end">
        <a href="/staff" class="btn btn-cancel me-2">Cancel</a>
        <button type="submit" class="btn btn-save" style="background-color: #0C8FAD; color: white;">Save</button>
      </div>
    </div>

    <!-- Staff Form Fields -->
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">First Name <span class="text-danger">*</span></label>
        <input type="text" name="firstName" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Last Name <span class="text-danger">*</span></label>
        <input type="text" name="lastName" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Contact Number <span class="text-danger">*</span></label>
        <input type="tel" name="phone" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Email ID <span class="text-danger">*</span></label>
        <input type="email" name="email" class="form-control">
      </div>
      <div class="col-md-4">
        <label class="form-label">Gender <span class="text-danger">*</span></label>
        <select name="gender" class="form-select" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Nationality <span class="text-danger">*</span></label>
        <input type="text" name="nationality" class="form-control">
      </div>
      <div class="col-md-4">
        <label class="form-label">Employee ID <span class="text-danger">*</span></label>
        <input type="text" name="employeeId" class="form-control">
      </div>
      <div class="col-md-4">
        <label class="form-label">Department <span class="text-danger">*</span></label>
        <select name="department" class="form-select" required>
          <option value="">Select</option>
          <% departments.forEach(dept => { %>
            <option value="<%= dept.deptName %>"><%= dept.deptName %></option>
          <% }) %>
        </select>
      </div>

      <div class="col-md-4">
        <label class="form-label">Designation <span class="text-danger">*</span></label>
        <input type="text" name="designation" class="form-control">
      </div>
      <div class="col-md-4">
        <label class="form-label">Password <span class="text-danger">*</span></label>
        <input type="password" name="password" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Confirm Password <span class="text-danger">*</span></label>
        <input type="password" name="confirmPassword" class="form-control" required>
      </div>
      <div class="col-12 mb-4">
        <label class="form-label" for="address">Address<span class="text-danger">*</span></label>
        <textarea name="address" id="address" class="form-control login-input address-box" rows="3" required></textarea>
      </div> 
    </div>
  </form>
</div>

<%- include("../partials/footer") %>
